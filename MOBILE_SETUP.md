# 📱 Mobile App Setup Guide

This guide will help you build and run your Next.js app as a **PWA** and **native Android/iOS app** using Capacitor.

## 🎯 Prerequisites

### Required Software:
1. **Node.js** (v18 or higher)
2. **npm** or **yarn**
3. **Android Studio** (for Android builds)
4. **Xcode** (for iOS builds - macOS only)

### Required Capacitor Plugins:
```bash
npm install @capacitor/android @capacitor/ios
```

## 📋 Quick Start

### 1. Install Dependencies

```bash
# Install all npm packages
npm install

# Install Capacitor platforms
npm install @capacitor/android @capacitor/ios
```

### 2. Build for PWA (Progressive Web App)

```bash
# Build the Next.js app as static export
npm run export
```

This will:
- Build your Next.js app
- Generate static files in the `out/` directory
- Create PWA service worker files in `public/`

### 3. Test PWA Locally

```bash
# Option 1: Use a local server (after export)
npx serve out

# Option 2: Deploy to a static host (Vercel, Netlify, etc.)
# The app will be installable from Chrome/Android/iOS Safari
```

**To install PWA:**
- **Chrome/Android**: Look for "Install" button in address bar
- **iOS Safari**: Tap Share → "Add to Home Screen"

### 4. Build for Native Android

```bash
# Build and sync with Capacitor
npm run cap:open:android
```

This will:
1. Build the Next.js app
2. Copy files to Android project
3. Open Android Studio

**In Android Studio:**
1. Wait for Gradle sync to complete
2. Select a device/emulator
3. Click "Run" ▶️ button
4. Your app will build and launch!

### 5. Build for Native iOS (macOS only)

```bash
# Build and sync with Capacitor
npm run cap:open:ios
```

This will:
1. Build the Next.js app
2. Copy files to iOS project
3. Open Xcode

**In Xcode:**
1. Select a simulator or connected device
2. Click "Run" ▶️ button
3. Your app will build and launch!

## 🔧 Available Commands

### Development
```bash
npm run dev          # Start Next.js dev server
npm run build        # Build for production
npm run start        # Start production server
```

### PWA
```bash
npm run export       # Build static export for PWA
```

### Capacitor
```bash
npm run cap:sync            # Sync web files to native projects
npm run cap:copy            # Build + copy files to native projects
npm run cap:open:android    # Build + copy + open Android Studio
npm run cap:open:ios        # Build + copy + open Xcode
npm run cap:sync:android    # Build + copy + sync Android
npm run cap:sync:ios        # Build + copy + sync iOS
```

## 📁 Project Structure

```
your-app/
├── app/                    # Next.js app directory
├── public/                 # Static assets + PWA files
│   ├── manifest.json       # PWA manifest
│   ├── sw.js              # Service worker (generated)
│   └── workbox-*.js       # Workbox files (generated)
├── out/                    # Static export output (for Capacitor)
├── android/                # Android project (generated by Capacitor)
├── ios/                    # iOS project (generated by Capacitor)
├── capacitor.config.ts     # Capacitor configuration
├── next.config.ts          # Next.js + PWA configuration
└── package.json            # Dependencies & scripts
```

## 🎨 Configuration Files

### `next.config.ts`
- Configured with `next-pwa` for PWA support
- Static export enabled for Capacitor
- Images optimized for static export

### `capacitor.config.ts`
- App ID: `com.language.linguaai`
- App Name: `LinguaAI`
- Web Directory: `out/` (Next.js static export)
- Splash screen configured

### `public/manifest.json`
- PWA metadata
- Icons and theme colors
- Display mode: standalone

## 🚀 Deployment Options

### Option 1: PWA (Web)
1. Run `npm run export`
2. Deploy `out/` folder to:
   - **Vercel**: `vercel --prod`
   - **Netlify**: Drag & drop `out/` folder
   - **GitHub Pages**: Push `out/` to gh-pages branch
   - **Firebase Hosting**: `firebase deploy`
   - Any static hosting service

### Option 2: Android APK/AAB
1. Run `npm run cap:open:android`
2. In Android Studio:
   - **Debug APK**: Build → Build Bundle(s) / APK(s) → Build APK(s)
   - **Release APK/AAB**: Build → Generate Signed Bundle / APK
3. Distribute via:
   - Google Play Store (upload AAB)
   - Direct APK download
   - Internal testing

### Option 3: iOS App
1. Run `npm run cap:open:ios`
2. In Xcode:
   - Configure signing & capabilities
   - Archive: Product → Archive
   - Distribute via App Store Connect
3. Distribute via:
   - App Store
   - TestFlight (beta testing)
   - Ad-hoc distribution

## 🐛 Troubleshooting

### Issue: Build fails with "output: 'export'" error
**Solution**: Remove any server-side features (API routes, `getServerSideProps`) as static export doesn't support them.

### Issue: PWA not installing
**Solution**: 
- Ensure you're using HTTPS (or localhost for testing)
- Check `manifest.json` is accessible
- Verify service worker is registered

### Issue: Android Studio shows errors
**Solution**:
```bash
# Clean and rebuild
cd android
./gradlew clean
cd ..
npm run cap:sync:android
```

### Issue: iOS build fails
**Solution**:
- Ensure you have Xcode and Command Line Tools installed
- Run `sudo xcode-select --switch /Applications/Xcode.app`
- In Xcode: File → Project Settings → Build System → Legacy Build System (if needed)

### Issue: Icons not showing
**Solution**: 
- Ensure `icon-192x192.png` and `icon-512x512.png` exist in `public/`
- Verify paths in `manifest.json`

## 📱 Testing Checklist

- [ ] PWA installs on Chrome/Android
- [ ] PWA installs on iOS Safari
- [ ] App works offline (PWA)
- [ ] Android app builds successfully
- [ ] iOS app builds successfully (macOS)
- [ ] All features work on mobile devices
- [ ] Notifications work (if implemented)
- [ ] Icons display correctly

## 📚 Additional Resources

- [Next.js PWA Documentation](https://github.com/shadowwalker/next-pwa)
- [Capacitor Documentation](https://capacitorjs.com/docs)
- [PWA Best Practices](https://web.dev/pwa-checklist/)
- [Android Build Guide](https://capacitorjs.com/docs/android)
- [iOS Build Guide](https://capacitorjs.com/docs/ios)

## ✅ Success!

Your Next.js app is now configured for:
- ✅ **PWA** - Installable from browser
- ✅ **Android** - Native APK/AAB builds
- ✅ **iOS** - Native App Store builds

Happy coding! 🎉

